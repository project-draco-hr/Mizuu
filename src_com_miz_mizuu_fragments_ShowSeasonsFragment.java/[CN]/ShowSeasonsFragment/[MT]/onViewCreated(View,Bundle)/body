{
  super.onViewCreated(view,savedInstanceState);
  if (setBackground && !MizLib.runsInPortraitMode(getActivity()) && MizLib.runsOnTablet(getActivity()))   view.findViewById(R.id.container).setBackgroundColor(Color.parseColor("#101010"));
  pbar=(ProgressBar)view.findViewById(R.id.progressbar);
  if (useGridView)   mGridView=(StickyGridHeadersGridView)view.findViewById(R.id.gridView);
 else   mListView=(ExpandableListView)view.findViewById(R.id.listView);
  if (useGridView) {
    mGridView.setAreHeadersSticky(false);
    mGridView.setAdapter(mGridAdapter);
  }
 else {
    mListView.setAdapter(mListAdapter);
    mListView.setGroupIndicator(null);
  }
  if (useGridView)   mGridView.setAdapter(mGridAdapter);
 else   mListView.setAdapter(mListAdapter);
  getCollectionView().setFastScrollEnabled(true);
  getCollectionView().setDrawSelectorOnTop(true);
  getCollectionView().setSelector(R.drawable.buttonstyle);
  if (!useGridView) {
    mListView.setOnChildClickListener(new OnChildClickListener(){
      @Override public boolean onChildClick(      ExpandableListView parent,      View v,      int groupPosition,      int childPosition,      long id){
        int position=getEpisodeNumber(groupPosition,childPosition);
        if (position >= 0) {
          if (mActionMode != null)           mActionMode.finish();
          if (!isPortrait) {
            mListView.setItemChecked(MizLib.flatPosition(mListView,groupPosition,childPosition),true);
            selectedEpisodeIndex=position;
          }
          selectEpisode(shownEpisodes.get(position));
        }
        return true;
      }
    }
);
  }
 else {
    mGridView.setOnItemClickListener(new OnItemClickListener(){
      @Override public void onItemClick(      AdapterView<?> arg0,      View arg1,      int position,      long arg3){
        if (position >= 0) {
          if (mActionMode != null)           mActionMode.finish();
          if (!isPortrait) {
            getCollectionView().setItemChecked(position,true);
            selectedEpisodeIndex=position;
          }
          selectEpisode(shownEpisodes.get(position));
        }
      }
    }
);
  }
  getCollectionView().setOnItemLongClickListener(new OnItemLongClickListener(){
    @Override public boolean onItemLongClick(    AdapterView<?> arg0,    View arg1,    int position,    long arg3){
      if (position >= 0) {
        if (!useGridView && ExpandableListView.getPackedPositionType(arg3) == ExpandableListView.PACKED_POSITION_TYPE_GROUP)         return false;
        if (mActionMode != null)         return false;
        getCollectionView().setItemChecked(position,true);
        if (!useGridView) {
          int pos=getEpisodeNumber(ExpandableListView.getPackedPositionGroup(arg3),ExpandableListView.getPackedPositionChild(mListView.getExpandableListPosition(position)));
          selectedEpisodeIndex=pos;
          selectEpisode(shownEpisodes.get(pos));
        }
 else {
          selectedEpisodeIndex=position;
          selectEpisode(shownEpisodes.get(position));
        }
        mActionMode=getActivity().startActionMode(mActionModeCallback);
      }
      return true;
    }
  }
);
  loadEpisodes(0,true);
}
