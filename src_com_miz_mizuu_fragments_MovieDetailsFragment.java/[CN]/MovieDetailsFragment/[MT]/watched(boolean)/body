{
  thisMovie.setHasWatched(true);
  if (db.updateMovieSingleItem(Long.valueOf(thisMovie.getRowId()),DbAdapter.KEY_HAS_WATCHED,thisMovie.getHasWatched())) {
    getActivity().invalidateOptionsMenu();
    if (showToast)     if (thisMovie.hasWatched()) {
      Toast.makeText(getActivity(),getString(R.string.markedAsWatched),Toast.LENGTH_SHORT).show();
    }
 else {
      Toast.makeText(getActivity(),getString(R.string.markedAsUnwatched),Toast.LENGTH_SHORT).show();
    }
    LocalBroadcastManager.getInstance(getActivity()).sendBroadcast(new Intent("mizuu-library-change"));
  }
 else {
    if (showToast)     Toast.makeText(getActivity(),getString(R.string.errorOccured),Toast.LENGTH_SHORT).show();
  }
  if (prefsRemoveMoviesFromWatchlist)   removeFromWatchlist();
  new Thread(){
    @Override public void run(){
      ArrayList<Movie> watchedMovies=new ArrayList<Movie>();
      watchedMovies.add(thisMovie);
      MizLib.markMovieAsWatched(watchedMovies,getActivity());
    }
  }
.start();
}
