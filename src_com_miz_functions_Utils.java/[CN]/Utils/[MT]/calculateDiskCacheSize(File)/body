{
  long size=MIN_DISK_CACHE_SIZE;
  try {
    StatFs statFs=new StatFs(dir.getAbsolutePath());
    long available=((long)statFs.getBlockCount()) * statFs.getBlockSize();
    size=available / 50;
  }
 catch (  IllegalArgumentException ignored) {
  }
  return Math.max(Math.min(size,MAX_DISK_CACHE_SIZE),MIN_DISK_CACHE_SIZE);
}
