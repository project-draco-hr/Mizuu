{
  ActivityManager am=(ActivityManager)context.getSystemService(ACTIVITY_SERVICE);
  boolean largeHeap=(context.getApplicationInfo().flags & FLAG_LARGE_HEAP) != 0;
  int memoryClass=am.getMemoryClass();
  if (largeHeap && SDK_INT >= HONEYCOMB) {
    memoryClass=ActivityManagerHoneycomb.getLargeMemoryClass(am);
  }
  return 1024 * 1024 * memoryClass / 7;
}
