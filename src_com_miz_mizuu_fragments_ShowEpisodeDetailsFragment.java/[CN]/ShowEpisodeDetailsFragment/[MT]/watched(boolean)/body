{
  dbHelper=MizuuApplication.getTvEpisodeDbAdapter();
  thisEpisode.setHasWatched(!thisEpisode.hasWatched());
  if (dbHelper.updateSingleItem(Long.valueOf(thisEpisode.getRowId()),DbAdapter.KEY_HAS_WATCHED,thisEpisode.getHasWatched())) {
    getActivity().invalidateOptionsMenu();
    if (showToast)     if (thisEpisode.hasWatched()) {
      Toast.makeText(getActivity(),getString(R.string.markedAsWatched),Toast.LENGTH_SHORT).show();
    }
 else {
      Toast.makeText(getActivity(),getString(R.string.markedAsUnwatched),Toast.LENGTH_SHORT).show();
    }
    LocalBroadcastManager.getInstance(getActivity()).sendBroadcast(new Intent("tvshow-episode-changed"));
  }
 else {
    if (showToast)     Toast.makeText(getActivity(),getString(R.string.errorOccured),Toast.LENGTH_SHORT).show();
  }
  new Thread(){
    @Override public void run(){
      ArrayList<com.miz.functions.TvShowEpisode> episode=new ArrayList<com.miz.functions.TvShowEpisode>();
      episode.add(new com.miz.functions.TvShowEpisode(thisEpisode.getShowId(),Integer.valueOf(thisEpisode.getEpisode()),Integer.valueOf(thisEpisode.getSeason())));
      MizLib.markEpisodeAsWatched(thisEpisode.getShowId(),episode,getActivity(),false);
    }
  }
.start();
}
