{
  if (!isAdded())   return;
  mCurrentSort=sort;
  Editor editor=mSharedPreferences.edit();
switch (mCurrentSort) {
case TITLE:
    editor.putString(SORTING_TVSHOWS,"sortTitle");
  break;
case RELEASE:
editor.putString(SORTING_TVSHOWS,"sortRelease");
break;
case RATING:
editor.putString(SORTING_TVSHOWS,"sortRating");
break;
case WEIGHTED_RATING:
editor.putString(SORTING_TVSHOWS,"sortWeightedRating");
break;
case NEWEST_EPISODE:
editor.putString(SORTING_TVSHOWS,"sortNewestEpisode");
break;
case DURATION:
editor.putString(SORTING_TVSHOWS,"sortDuration");
break;
}
editor.apply();
ArrayList<TvShowSortHelper> tempHelper=new ArrayList<TvShowSortHelper>();
for (int i=0; i < mTvShowKeys.size(); i++) {
tempHelper.add(new TvShowSortHelper(mTvShows.get(mTvShowKeys.get(i)),mTvShowKeys.get(i),mCurrentSort));
}
Collections.sort(tempHelper);
mTvShowKeys.clear();
for (int i=0; i < tempHelper.size(); i++) {
mTvShowKeys.add(tempHelper.get(i).getIndex());
}
tempHelper.clear();
setProgressBarVisible(false);
notifyDataSetChanged();
}
