{
synchronized (queue) {
    if (queue.peek() != null && !queue.isEmpty()) {
      new Thread(){
        @Override public void run(){
          String file=queue.poll();
          if (file == null)           stopSelf();
          if (season.isEmpty() && episode.isEmpty()) {
            DecryptedShowEpisode decrypted=MizLib.decryptEpisode(file.contains("<MiZ>") ? file.split("<MiZ>")[0] : file,PreferenceManager.getDefaultSharedPreferences(getApplicationContext()).getString("ignoredTags",""));
            downloadEpisode(MizLib.addIndexZero(decrypted.getSeason()),MizLib.addIndexZero(decrypted.getEpisode()),file);
          }
 else {
            downloadEpisode(season,episode,file);
          }
        }
      }
.start();
    }
 else {
      updateWidgets();
      stopSelf();
    }
  }
}
