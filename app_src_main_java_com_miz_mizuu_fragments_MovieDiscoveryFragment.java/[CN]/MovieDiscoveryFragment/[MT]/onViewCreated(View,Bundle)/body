{
  super.onViewCreated(v,savedInstanceState);
  mProgressBar=(ProgressBar)v.findViewById(R.id.progress);
  mProgressBar.setVisibility(View.GONE);
  mAdapter=new ImageAdapter(getActivity());
  mGridView=(ObservableGridView)v.findViewById(R.id.gridView);
  mGridView.setAdapter(mAdapter);
  mGridView.setColumnWidth(mImageThumbSize);
  mGridView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener(){
    @Override public void onGlobalLayout(){
      if (mAdapter.getNumColumns() == 0) {
        final int numColumns=(int)Math.floor(mGridView.getWidth() / (mImageThumbSize + mImageThumbSpacing));
        if (numColumns > 0)         mAdapter.setNumColumns(numColumns);
        MizLib.removeViewTreeObserver(mGridView.getViewTreeObserver(),this);
      }
    }
  }
);
  mGridView.setOnItemClickListener(new OnItemClickListener(){
    @Override public void onItemClick(    AdapterView<?> arg0,    View arg1,    int arg2,    long arg3){
      Intent i=new Intent();
      if (mMovieMap.get(Integer.valueOf(mMovies.get(arg2).getId()))) {
        i.setClass(getActivity(),MovieDetails.class);
        i.putExtra("tmdbId",mMovies.get(arg2).getId());
      }
 else {
        i.setClass(getActivity(),TMDbMovieDetails.class);
        i.putExtra("tmdbId",mMovies.get(arg2).getId());
        i.putExtra("title",mMovies.get(arg2).getTitle());
      }
      ActivityOptionsCompat options=ActivityOptionsCompat.makeSceneTransitionAnimation(getActivity(),arg1.findViewById(R.id.cover),"cover");
      ActivityCompat.startActivity(getActivity(),i,options.toBundle());
    }
  }
);
  if (getArguments().containsKey("json")) {
    mJson=getArguments().getString("json");
    mBaseUrl=getArguments().getString("baseUrl");
    loadJson();
  }
}
