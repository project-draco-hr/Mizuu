{
  super.onViewCreated(view,savedInstanceState);
  if (MizLib.isPortrait(getActivity())) {
    mActionBarBackgroundDrawable=new GradientDrawable(GradientDrawable.Orientation.BOTTOM_TOP,new int[]{0x00000000,0xaa000000});
    getActivity().getActionBar().setBackgroundDrawable(mActionBarBackgroundDrawable);
    ObservableScrollView sv=(ObservableScrollView)view.findViewById(R.id.scrollView1);
    sv.setOnScrollChangedListener(new OnScrollChangedListener(){
      @Override public void onScrollChanged(      ScrollView who,      int l,      int t,      int oldl,      int oldt){
        final int headerHeight=view.findViewById(R.id.episodePhoto).getHeight() - getActivity().getActionBar().getHeight();
        final float ratio=(float)Math.min(Math.max(t,0),headerHeight) / headerHeight;
        final int newAlpha=(int)(ratio * 255);
        mActionBarBackgroundDrawable=new GradientDrawable(GradientDrawable.Orientation.BOTTOM_TOP,new int[]{Color.parseColor("#" + ((Integer.toHexString(newAlpha).length() == 1) ? ("0" + Integer.toHexString(newAlpha)) : Integer.toHexString(newAlpha)) + "080808"),(newAlpha >= 170) ? Color.parseColor("#" + Integer.toHexString(newAlpha) + "080808") : 0xaa080808});
        getActivity().getActionBar().setBackgroundDrawable(mActionBarBackgroundDrawable);
      }
    }
);
  }
  if (!MizLib.isPortrait(getActivity()))   MizLib.addActionBarMargin(getActivity(),view.findViewById(R.id.episode_relative_layout));
  mBackdrop=(ImageView)view.findViewById(R.id.imageBackground);
  mEpisodePhoto=(ImageView)view.findViewById(R.id.episodePhoto);
  mTitle=(TextView)view.findViewById(R.id.movieTitle);
  mDescription=(TextView)view.findViewById(R.id.textView2);
  mFileSource=(TextView)view.findViewById(R.id.textView3);
  mAirDate=(TextView)view.findViewById(R.id.textReleaseDate);
  mRating=(TextView)view.findViewById(R.id.textView12);
  mDirector=(TextView)view.findViewById(R.id.director);
  mWriter=(TextView)view.findViewById(R.id.writer);
  mGuestStars=(TextView)view.findViewById(R.id.guest_stars);
  mTitle.setVisibility(View.VISIBLE);
  mTitle.setText(mEpisode.getTitle());
  mTitle.setTypeface(MizuuApplication.getOrCreateTypeface(getActivity(),"RobotoCondensed-Regular.ttf"));
  mTitle.setLayerType(View.LAYER_TYPE_SOFTWARE,null);
  mDescription.setTypeface(mLight);
  mFileSource.setTypeface(mLight);
  mAirDate.setTypeface(mLight);
  mRating.setTypeface(mLight);
  mDirector.setTypeface(mLight);
  mWriter.setTypeface(mLight);
  mGuestStars.setTypeface(mLight);
  mDescription.setBackgroundResource(R.drawable.selectable_background_example);
  mDescription.setMaxLines(getActivity().getResources().getInteger(R.integer.episode_details_max_lines));
  mDescription.setTag(true);
  mDescription.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      if (((boolean)mDescription.getTag())) {
        mDescription.setMaxLines(1000);
        mDescription.setTag(false);
      }
 else {
        mDescription.setMaxLines(getActivity().getResources().getInteger(R.integer.episode_details_max_lines));
        mDescription.setTag(true);
      }
    }
  }
);
  mDescription.setEllipsize(TextUtils.TruncateAt.END);
  mDescription.setFocusable(true);
  mDescription.setText(mEpisode.getDescription());
  mFileSource.setText(mEpisode.getFilepath());
  mAirDate.setText(MizLib.getPrettyDate(getActivity(),mEpisode.getReleasedate()));
  if (!mEpisode.getRating().equals("0.0/10")) {
    if (mEpisode.getRating().contains("/")) {
      try {
        int rating=(int)(Double.parseDouble(mEpisode.getRating().substring(0,mEpisode.getRating().indexOf("/"))) * 10);
        mRating.setText(Html.fromHtml(rating + "<small> %</small>"));
      }
 catch (      NumberFormatException e) {
        mRating.setText(Html.fromHtml(mEpisode.getRating().replace("/","<small> / ") + "</small>"));
      }
    }
 else {
      mRating.setText(mEpisode.getRating());
    }
  }
 else {
    mRating.setText(R.string.stringNA);
  }
  if (MizLib.isEmpty(mEpisode.getDirector()) || mEpisode.getDirector().equals(getString(R.string.stringNA))) {
    mDirector.setVisibility(View.GONE);
  }
 else {
    mDirector.setText(mEpisode.getDirector());
  }
  if (MizLib.isEmpty(mEpisode.getWriter()) || mEpisode.getWriter().equals(getString(R.string.stringNA))) {
    mWriter.setVisibility(View.GONE);
  }
 else {
    mWriter.setText(mEpisode.getWriter());
  }
  if (MizLib.isEmpty(mEpisode.getGuestStars()) || mEpisode.getGuestStars().equals(getString(R.string.stringNA))) {
    mGuestStars.setVisibility(View.GONE);
  }
 else {
    mGuestStars.setText(mEpisode.getGuestStars());
  }
  new BlurImage().execute();
}
