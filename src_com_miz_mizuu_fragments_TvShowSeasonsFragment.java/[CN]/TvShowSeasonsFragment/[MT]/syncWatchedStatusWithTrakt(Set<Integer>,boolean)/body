{
  new com.miz.functions.AsyncTask<Void,Boolean,Boolean>(){
    private Set<Integer> mSelectedSeasons;
    private List<TvShowEpisode> mEpisodes=new ArrayList<TvShowEpisode>();
    @Override protected void onPreExecute(){
      mSelectedSeasons=new HashSet<Integer>(checkedSeasons);
      DbAdapterTvShowEpisode db=MizuuApplication.getTvEpisodeDbAdapter();
      for (      int season : mSelectedSeasons) {
        List<GridEpisode> temp=db.getEpisodesInSeason(mContext,mShowId,mItems.get(season).getSeason());
        for (int i=0; i < temp.size(); i++) {
          mEpisodes.add(new TvShowEpisode(mShowId,temp.get(i).getEpisode(),temp.get(i).getSeason()));
        }
        temp.clear();
        temp=null;
      }
    }
    @Override protected Boolean doInBackground(    Void... params){
      boolean result=MizLib.markEpisodeAsWatched(mShowId,mEpisodes,mContext,watched);
      if (!result)       result=MizLib.markEpisodeAsWatched(mShowId,mEpisodes,mContext,watched);
      return result;
    }
    @Override protected void onPostExecute(    Boolean result){
      if (!result)       Toast.makeText(mContext,R.string.sync_error,Toast.LENGTH_LONG).show();
    }
  }
.execute();
}
