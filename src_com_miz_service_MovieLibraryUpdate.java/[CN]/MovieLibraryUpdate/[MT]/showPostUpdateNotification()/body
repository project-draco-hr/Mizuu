{
  Intent notificationIntent=new Intent(this,Main.class);
  notificationIntent.putExtra("fromUpdate",true);
  notificationIntent.putExtra("startup","1");
  notificationIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);
  PendingIntent contentIntent=PendingIntent.getActivity(this,0,notificationIntent,0);
  mBuilder=new NotificationCompat.Builder(getApplicationContext());
  if (!mStopUpdate) {
    mBuilder.setSmallIcon(R.drawable.done);
    mBuilder.setTicker(getString(R.string.finishedMovieLibraryUpdate));
    mBuilder.setContentTitle(getString(R.string.finishedMovieLibraryUpdate));
    mBuilder.setContentText(getString(R.string.stringJustAdded) + " " + mCount+ " "+ getResources().getQuantityString(R.plurals.moviesInLibrary,mCount,mCount));
    mBuilder.setLargeIcon(BitmapFactory.decodeResource(getResources(),R.drawable.done));
  }
 else {
    mBuilder.setSmallIcon(R.drawable.ignoresmallfiles);
    mBuilder.setTicker(getString(R.string.stringUpdateCancelled));
    mBuilder.setContentTitle(getString(R.string.stringUpdateCancelled));
    mBuilder.setContentText(getString(R.string.stringJustAdded) + " " + mCount+ " "+ getResources().getQuantityString(R.plurals.moviesInLibrary,mCount,mCount));
    mBuilder.setLargeIcon(BitmapFactory.decodeResource(getResources(),R.drawable.ignoresmallfiles));
  }
  mBuilder.setContentIntent(contentIntent);
  mBuilder.setAutoCancel(true);
  Notification updateNotification=mBuilder.build();
  mNotificationManager=(NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
  if (mCount > 0)   mNotificationManager.notify(POST_UPDATE_NOTIFICATION,updateNotification);
}
