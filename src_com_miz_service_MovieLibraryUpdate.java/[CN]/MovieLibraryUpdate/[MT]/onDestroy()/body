{
  super.onDestroy();
  log("onDestroy()");
  if (mNotificationManager == null)   mNotificationManager=(NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
  mNotificationManager.cancel(NOTIFICATION_ID);
  reloadLibrary();
  showPostUpdateNotification();
  AppWidgetManager awm=AppWidgetManager.getInstance(this);
  awm.notifyAppWidgetViewDataChanged(awm.getAppWidgetIds(new ComponentName(this,MovieStackWidgetProvider.class)),R.id.stack_view);
  awm.notifyAppWidgetViewDataChanged(awm.getAppWidgetIds(new ComponentName(this,MovieCoverWidgetProvider.class)),R.id.widget_grid);
  awm.notifyAppWidgetViewDataChanged(awm.getAppWidgetIds(new ComponentName(this,MovieBackdropWidgetProvider.class)),R.id.widget_grid);
  LocalBroadcastManager.getInstance(this).unregisterReceiver(mMessageReceiver);
  MizLib.scheduleMovieUpdate(this);
  if (Trakt.hasTraktAccount(this) && mSyncLibraries && ((mTotalFiles - mMovieQueue.size()) > 0)) {
    getApplicationContext().startService(new Intent(getApplicationContext(),TraktMoviesSyncService.class));
  }
}
