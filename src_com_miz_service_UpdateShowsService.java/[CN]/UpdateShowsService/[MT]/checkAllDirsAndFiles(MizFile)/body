{
  try {
    if (subfolderSearch) {
      if (dir.isDirectory()) {
        String[] childs=dir.list();
        for (int i=0; i < childs.length; i++) {
          if (dir.getAbsolutePath().startsWith("smb://")) {
            tempSmbFile=new SmbFile(dir.getAbsolutePath() + childs[i] + "/");
            if (tempSmbFile.isDirectory()) {
              tempMizFile=new MizFile(tempSmbFile);
              checkAllDirsAndFiles(tempMizFile);
            }
 else {
              tempSmbFile=new SmbFile(dir.getAbsolutePath() + childs[i]);
              tempMizFile=new MizFile(tempSmbFile);
              addToResults(tempMizFile);
            }
          }
 else {
            tempMizFile=new MizFile(new File(dir.getAbsolutePath() + "/" + childs[i]));
            checkAllDirsAndFiles(tempMizFile);
          }
        }
      }
 else {
        addToResults(dir);
      }
    }
 else {
      MizFile[] children=dir.listFiles();
      for (int i=0; i < children.length; i++)       addToResults(children[i]);
    }
  }
 catch (  Exception e) {
  }
}
