{
  super.onStartCommand(intent,flags,startId);
  if (!MizLib.isOnline(this))   stopSelf();
  Intent notificationIntent=new Intent(this,CancelUpdateDialog.class);
  notificationIntent.putExtra("type",CancelUpdateDialog.TVSHOWS);
  notificationIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
  contentIntent=PendingIntent.getActivity(this,0,notificationIntent,0);
  builder=new NotificationCompat.Builder(getApplicationContext());
  builder.setSmallIcon(R.drawable.refresh);
  builder.setTicker(getString(R.string.updateLookingForFiles));
  builder.setContentTitle(getString(R.string.updatingTvShows) + " (0%)");
  builder.setContentText(getString(R.string.updateLookingForFiles));
  builder.setContentIntent(contentIntent);
  builder.setOngoing(true);
  builder.setOnlyAlertOnce(true);
  builder.setLargeIcon(BitmapFactory.decodeResource(getResources(),R.drawable.refresh));
  builder.addAction(R.drawable.remove,getString(R.string.stringCancelUpdate),contentIntent);
  Notification updateNotification=builder.build();
  mNotificationManager=(NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
  mNotificationManager.notify(NOTIFICATION_ID,updateNotification);
  startForeground(NOTIFICATION_ID,updateNotification);
  settings=PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
  clearLibrary=settings.getBoolean("prefsClearLibrary",false);
  subfolderSearch=settings.getBoolean("prefsEnableSubFolderSearch",true);
  clearUnavailable=settings.getBoolean("prefsRemoveUnavailable",false);
  prefsDisableEthernetWiFiCheck=settings.getBoolean("prefsDisableEthernetWiFiCheck",false);
  ignoreRemovedFiles=settings.getBoolean("prefsIgnoredFilesEnabled",false);
  syncLibraries=settings.getBoolean("syncLibrariesWithTrakt",true);
  editor=settings.edit();
  LocalBroadcastManager.getInstance(this).registerReceiver(mMessageReceiver,new IntentFilter("mizuu-tvshows-object"));
  new ShowUpdateSetup().execute();
  return Service.START_NOT_STICKY;
}
