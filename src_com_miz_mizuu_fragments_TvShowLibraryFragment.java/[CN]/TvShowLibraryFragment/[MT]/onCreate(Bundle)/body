{
  super.onCreate(savedInstanceState);
  setRetainInstance(true);
  setHasOptionsMenu(true);
  setupSpinnerItems();
  PreferenceManager.getDefaultSharedPreferences(getActivity()).registerOnSharedPreferenceChangeListener(this);
  settings=PreferenceManager.getDefaultSharedPreferences(getActivity());
  ignorePrefixes=settings.getBoolean(IGNORED_TITLE_PREFIXES,false);
  mShowTitles=settings.getBoolean(SHOW_TITLES_IN_GRID,true);
  String thumbnailSize=settings.getString(GRID_ITEM_SIZE,getString(R.string.normal));
  if (thumbnailSize.equals(getString(R.string.large)))   mImageThumbSize=(int)(getResources().getDimensionPixelSize(R.dimen.image_thumbnail_size) * 1.33);
 else   if (thumbnailSize.equals(getString(R.string.normal)))   mImageThumbSize=(int)(getResources().getDimensionPixelSize(R.dimen.image_thumbnail_size) * 1);
 else   mImageThumbSize=(int)(getResources().getDimensionPixelSize(R.dimen.image_thumbnail_size) * 0.75);
  mImageThumbSpacing=getResources().getDimensionPixelSize(R.dimen.image_thumbnail_spacing);
  mPicasso=MizuuApplication.getPicasso(getActivity());
  mConfig=MizuuApplication.getBitmapConfig();
  mAdapter=new LoaderAdapter(getActivity());
}
