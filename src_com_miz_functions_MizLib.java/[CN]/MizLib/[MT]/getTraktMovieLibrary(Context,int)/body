{
  SharedPreferences settings=PreferenceManager.getDefaultSharedPreferences(c);
  String username=settings.getString(TRAKT_USERNAME,"").trim();
  String password=settings.getString(TRAKT_PASSWORD,"");
  if (username.isEmpty() || password.isEmpty())   return new JSONArray();
  OkApacheClient httpclient=new OkApacheClient();
  HttpPost httppost=null;
  if (type == WATCHED) {
    httppost=new HttpPost("http://api.trakt.tv/user/library/movies/watched.json/" + getTraktApiKey(c) + "/"+ username);
  }
 else   if (type == RATINGS) {
    httppost=new HttpPost("http://api.trakt.tv/user/ratings/movies.json/" + getTraktApiKey(c) + "/"+ username+ "/love");
  }
 else   if (type == WATCHLIST) {
    httppost=new HttpPost("http://api.trakt.tv/user/watchlist/movies.json/" + getTraktApiKey(c) + "/"+ username);
  }
 else   if (type == COLLECTION) {
    httppost=new HttpPost("http://api.trakt.tv/user/library/movies/collection.json/" + getTraktApiKey(c) + "/"+ username);
  }
  try {
    JSONObject json=new JSONObject();
    json.put("username",username);
    json.put("password",password);
    httppost.setEntity(new StringEntity(json.toString()));
    ResponseHandler<String> responseHandler=new BasicResponseHandler();
    String result=httpclient.execute(httppost,responseHandler);
    return new JSONArray(result);
  }
 catch (  Exception e) {
  }
  return new JSONArray();
}
