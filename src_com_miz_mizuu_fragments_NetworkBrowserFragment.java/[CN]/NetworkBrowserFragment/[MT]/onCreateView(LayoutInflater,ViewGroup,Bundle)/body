{
  final View v=inflater.inflate(R.layout.filebrowser,container,false);
  content=(LinearLayout)v.findViewById(R.id.content);
  pbar=(ProgressBar)v.findViewById(R.id.progress);
  addSource=(Button)v.findViewById(R.id.ok);
  addSource.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      DbAdapterSources dbHelper=MizuuApplication.getSourcesAdapter();
      if (isMovie) {
        dbHelper.createSource("smb://" + visiblePath.replace("smb://",""),DbAdapterSources.KEY_TYPE_MOVIE,FileSource.SMB,user,pass,domain);
      }
 else {
        dbHelper.createSource("smb://" + visiblePath.replace("smb://",""),DbAdapterSources.KEY_TYPE_SHOW,FileSource.SMB,user,pass,domain);
      }
      LocalBroadcastManager.getInstance(getActivity()).sendBroadcast(new Intent("mizuu-filesource-change"));
      getActivity().finish();
      return;
    }
  }
);
  parent=(ListView)v.findViewById(R.id.parent);
  parent.setAdapter(parentPathAdapter);
  parent.setOnItemClickListener(new OnItemClickListener(){
    @Override public void onItemClick(    AdapterView<?> arg0,    View arg1,    int arg2,    long arg3){
      if (arg2 == 0) {
        if (!parentParentPath.equals("smb://"))         browse(parentParentPath);
 else         Toast.makeText(getActivity(),getString(R.string.noParentFolder),Toast.LENGTH_SHORT).show();
      }
 else {
        browse(parentPathContent.get(arg2 - 1));
      }
    }
  }
);
  current=(ListView)v.findViewById(R.id.current);
  current.setAdapter(currentPathAdapter);
  current.setOnItemClickListener(new OnItemClickListener(){
    @Override public void onItemClick(    AdapterView<?> arg0,    View arg1,    int arg2,    long arg3){
      if (arg2 == 0) {
        if (!parentPath.isEmpty())         browse(parentPath);
 else         Toast.makeText(getActivity(),getString(R.string.noParentFolder),Toast.LENGTH_SHORT).show();
      }
 else {
        browse(currentPathContent.get(arg2 - 1));
      }
    }
  }
);
  return v;
}
