{
  if (isSmb) {
    try {
      SmbFile[] fileList=smb.listFiles();
      int size=fileList.length;
      listFiles=new MizFile[size];
      for (int i=0; i < size; i++)       if (fileList[i] != null)       listFiles[i]=new MizFile(fileList[i]);
    }
 catch (    SmbException e) {
      listFiles=new MizFile[]{};
    }
  }
 else {
    File[] fileList=file.listFiles();
    if (fileList != null) {
      int size=fileList.length;
      listFiles=new MizFile[size];
      for (int i=0; i < size; i++)       listFiles[i]=new MizFile(fileList[i]);
    }
 else {
      listFiles=new MizFile[]{};
    }
  }
  return listFiles;
}
